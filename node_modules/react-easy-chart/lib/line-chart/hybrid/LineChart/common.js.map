{"version":3,"sources":["../../../../modules/line-chart/hybrid/LineChart/common.js"],"names":["formatType","createMapDatumX","createMapDatumY","createParserDatumX","createParserDatumY","createParserY","createParserX","createFormatX","createFormatY","calculateDomain","calculateExtent","createDomainX","createDomainY","createScaleTimeX","createScaleTimeY","createScaleTextX","createScaleTextY","createScaleLinearX","createScaleLinearY","createScaleY","createScaleX","TIMEPARSER","TIMEFORMAT","mapDatumTimeX","p","d","x","mapDatumTimeY","y","mapDatumX","mapDatumY","formatDatumTimeX","formatDatumTimeY","formatDatumX","formatDatumY","formatString","v","formatNumber","n","toFixed","type","createParser","pattern","createFormat","format","data","map","domain","forEach","item","i","includes","splice","min","max","row","MIN","MAX","reduce","c","createUniqueID","Math","floor","random","Date","getTime","scale","range","s","padding","defaultStyles","defaultColors","getDefaultAxisStyles"],"mappings":"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","file":"common.js","sourcesContent":["\nimport { time } from 'd3';\nimport { extent } from 'd3-array';\nimport { scaleLinear, scalePoint } from 'd3-scale';\nimport { timeParse } from 'd3-time-format';\n\nimport defaultStyles from './common/defaultStyles';\nimport { defaultAxisStyles } from './common/defaultAxisStyles';\nimport defaultColors from './common/defaultColors';\n\nconst TIMEPARSER = {};\nconst TIMEFORMAT = {};\n\nconst mapDatumTimeX = (p) => (d) => p(d.x);\nconst mapDatumTimeY = (p) => (d) => p(d.y);\nconst mapDatumX = (d) => d.x;\nconst mapDatumY = (d) => d.y;\n\nexport {\n  mapDatumTimeX,\n  mapDatumTimeY,\n  mapDatumX,\n  mapDatumY\n};\n\nconst formatDatumTimeX = (p) => (d) => p(d.x);\nconst formatDatumTimeY = (p) => (d) => p(d.y);\nconst formatDatumX = (d) => d.x;\nconst formatDatumY = (d) => d.y;\n\nexport {\n  formatDatumTimeX,\n  formatDatumTimeY,\n  formatDatumX,\n  formatDatumY\n};\n\nconst formatString = (v) => (v);\nconst formatNumber = (n) => (\n  (n % 1)\n    ? n.toFixed(1)\n    : n);\n\nexport function formatType(type) {\n  return (type === 'text')\n      ? formatString\n      : formatNumber;\n}\n\nfunction createParser(pattern = '%d-%b-%y') {\n  return (\n    TIMEPARSER[pattern] || (\n    TIMEPARSER[pattern] = timeParse(pattern)));\n}\n\nexport function createMapDatumX(type, pattern) {\n  return (type === 'time')\n    ? formatDatumTimeX(createParser(pattern))\n    : formatDatumX;\n}\n\nexport function createMapDatumY(type, pattern) {\n  return (type === 'time')\n    ? formatDatumTimeY(createParser(pattern))\n    : formatDatumY;\n}\n\nexport function createParserDatumX(type, pattern) {\n  return (type === 'time')\n    ? formatDatumTimeX(createParser(pattern))\n    : formatDatumX;\n}\n\nexport function createParserDatumY(type, pattern) {\n  return (type === 'time')\n    ? formatDatumTimeY(createParser(pattern))\n    : formatDatumY;\n}\n\nexport function createParserY(type, pattern) {\n  return (type === 'time')\n    ? formatDatumTimeY(createParser(pattern))\n    : formatDatumY;\n}\n\nexport function createParserX(type, pattern) {\n  return (type === 'time')\n    ? formatDatumTimeX(createParser(pattern))\n    : formatDatumX;\n}\n\nexport { createParser };\n\nfunction createFormat(pattern = '%b %d') {\n  return (\n    TIMEFORMAT[pattern] || (\n    TIMEFORMAT[pattern] = time.format(pattern)));\n}\n\nexport function createFormatX(type, pattern) {\n  return (type === 'time')\n    ? createFormat(pattern)\n    : (v) => v;\n}\n\nexport function createFormatY(type, pattern) {\n  return (type === 'time')\n    ? createFormat(pattern)\n    : (v) => v;\n}\n\nexport { createFormat };\n\nexport function calculateDomain(data, map) {\n  const domain = [];\n\n  data.forEach((item) => {\n    item.forEach((d, i) => {\n      const v = map(d);\n      if (!domain.includes(v)) {\n        domain.splice(i, 0, v);\n      }\n    });\n  });\n\n  return domain;\n}\n\nexport function calculateExtent(data, map) {\n  let min; // Low\n  let max; // High\n  data.forEach((row) => {\n    const [MIN, MAX] = extent(row, map);\n    /*\n     * Equivalent to\n     *\n     * Math.min()\n     * Math.max()\n     *\n     * For non-numeric values\n     */\n    min =\n      (min < MIN)\n        ? min\n        : MIN;\n    max =\n      (max > MAX)\n        ? max\n        : MAX;\n  });\n  return [min, max];\n}\n\nexport function createDomainX(type, data, pattern) {\n  switch (type) {\n    case 'time':\n      return calculateExtent(data, mapDatumTimeX(createParser(pattern)));\n    case 'text':\n      return calculateDomain(data, mapDatumX);\n    default:\n      return calculateExtent(data, mapDatumX);\n  }\n}\n\nexport function createDomainY(type, data, pattern) {\n  switch (type) {\n    case 'time':\n      return calculateExtent(data, mapDatumTimeY(createParser(pattern)));\n    case 'text':\n      return calculateDomain(data, mapDatumY);\n    default:\n      return calculateExtent(data, mapDatumY);\n  }\n}\n\n/* eslint no-param-reassign: 0 */\nexport const reduce = (p, c) => (p -= c);\n\nexport const createUniqueID = () => Math.floor(Math.random() * new Date().getTime());\n\nexport function createScaleTimeX(domain = [], x = 0) {\n  return time.scale()\n    .domain(domain)\n    .range([0, x]);\n}\n\nexport function createScaleTimeY(domain = [], y = 0) {\n  return time.scale()\n    .domain(domain)\n    .range([y, 0]);\n}\n\nexport function createScaleTextX(domain = [], s = 0) {\n  return scalePoint()\n    .domain(domain)\n    .range([0, s])\n    .padding(0);\n}\n\nexport function createScaleTextY(domain = [], s = 0) {\n  return scalePoint()\n    .domain(domain)\n    .range([0, s])\n    .padding(0);\n}\n\nexport function createScaleLinearX(domain = [], x = 0) {\n  return scaleLinear()\n    .domain(domain)\n    .range([0, x]);\n}\n\nexport function createScaleLinearY(domain = [], y = 0) {\n  return scaleLinear()\n    .domain(domain)\n    .range([y, 0]);\n}\n\nexport function createScaleY(type, domain = [], y = 0) {\n  switch (type) {\n    case 'time':\n      return createScaleTimeY(domain, y);\n    case 'text':\n      return createScaleTextY(domain, y);\n    default:\n      return createScaleLinearY(domain, y);\n  }\n}\n\nexport function createScaleX(type, domain = [], x = 0) {\n  switch (type) {\n    case 'time':\n      return createScaleTimeX(domain, x);\n    case 'text':\n      return createScaleTextX(domain, x);\n    default:\n      return createScaleLinearX(domain, x);\n  }\n}\n\nexport {\n  defaultStyles,\n  defaultColors\n};\n\nexport { defaultAxisStyles as getDefaultAxisStyles };\n"]}